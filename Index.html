<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grid Multiplier</title>
  <style>
    :root { font-family: -apple-system, system-ui, Segoe UI, Roboto, Arial; }
    body { margin: 16px; }
    h1 { font-size: 18px; margin: 0 0 12px; }

    .grid {
      display: grid;
      gap: 10px;
      max-width: 520px;
    }

    .cell {
      position: relative;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.12);
      min-height: 92px;
      overflow: hidden;
      display: flex;
      align-items: flex-end;
      padding: 10px;
      box-sizing: border-box;
    }

    /* Big multiplier text */
    .mult {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-weight: 900;
      color: #000;        /* ✅ black + bold */
      font-size: 44px;
      line-height: 1;
      pointer-events: none;
      opacity: 0.9;
    }

    /* Small per-cell product in corner (optional but useful) */
    .prod {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.80);
      border: 1px solid rgba(0,0,0,.12);
      color: #000;
      font-weight: 800;
      font-size: 12px;
      pointer-events: none;
    }

    input[type="number"]{
      width: 100%;
      font-size: 18px;
      padding: 10px 10px;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,.18);
      background: rgba(255,255,255,.88);
      box-sizing: border-box;
      color: #000;
      font-weight: 700;
    }

    .row { max-width: 520px; display: flex; gap: 10px; margin-top: 14px; flex-wrap: wrap; }
    button {
      font-size: 16px;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid #cfcfcf;
      background: #f6f6f6;
      cursor: pointer;
    }

    .result {
      max-width: 520px;
      margin-top: 14px;
      padding: 12px 14px;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      background: #fafafa;
      font-size: 16px;
      line-height: 1.45;
      color: #000;
      font-weight: 700;
    }
  </style>
</head>
<body>
  <h1>Grid × Multiplier</h1>

  <div class="grid" id="grid"></div>

  <div class="row">
    <button id="clearBtn" type="button">Clear</button>
  </div>

  <div class="result" id="result"></div>

<script>
  // ✅ Your multipliers from the screenshot (4 rows × 3 columns)
  const MULT = [
    [0,    0.4,  1.7 ],
    [1.6,  2.4,  2.0 ],
    [1.5,  1.25, 0.75],
    [0.75, 0.8,  0.4 ]
  ];

  const LIGHT_RED  = "#ffd6d6";
  const LIGHT_BLUE = "#d9f2ff";

  const rows = MULT.length;
  const cols = MULT[0].length;

  const gridEl   = document.getElementById("grid");
  const resultEl = document.getElementById("result");
  const clearBtn = document.getElementById("clearBtn");

  // Make grid columns match your layout (3 columns here)
  gridEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

  const inputs = [];
  const prodBadges = [];

  function numOrNull(v) {
    const t = String(v).trim();
    if (t === "") return null;
    const n = Number(t);
    return Number.isFinite(n) ? n : null;
  }

  function fmt(n) {
    // cleaner display (no trailing .0)
    return Number.isInteger(n) ? String(n) : String(n);
  }

  // Build cells
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      const cell = document.createElement("div");
      cell.className = "cell";
      cell.style.background = (r === 0) ? LIGHT_RED : LIGHT_BLUE;

      const mult = document.createElement("div");
      mult.className = "mult";
      mult.textContent = fmt(MULT[r][c]);

      const prod = document.createElement("div");
      prod.className = "prod";
      prod.textContent = "× = 0";
      prodBadges.push(prod);

      const inp = document.createElement("input");
      inp.type = "number";
      inp.inputMode = "decimal";
      inp.step = "any";
      inp.placeholder = ""; // leave blank to ignore
      inp.addEventListener("input", recalc);

      inputs.push({ r, c, el: inp });

      cell.appendChild(mult);
      cell.appendChild(prod);
      cell.appendChild(inp);
      gridEl.appendChild(cell);
    }
  }

  function recalc() {
    let total = 0;
    let filled = 0;

    for (let i = 0; i < inputs.length; i++) {
      const { r, c, el } = inputs[i];
      const n = numOrNull(el.value);
      const m = MULT[r][c];
      const cellProd = (n === null) ? 0 : (n * m);

      if (n !== null) filled++;
      total += cellProd;
      prodBadges[i].textContent = `× = ${cellProd}`;
    }

    resultEl.innerHTML =
      `Total (sum of count × multiplier): <b>${total}</b><br/>` +
      `Cells filled: <b>${filled}</b>`;
  }

  clearBtn.addEventListener("click", () => {
    for (const x of inputs) x.el.value = "";
    recalc();
    inputs[0].el.focus();
  });

  recalc();
</script>
</body>
</html>
